---
layout: post
title: PPR
description: 
type: issues
comments: True
---

# Video Demo

<video width="640" height="360" controls>
  <source src="{{site.baseurl}}/images/2025-03-10 17-38-23.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

# PPR


## A List being Created

  ```python
let selectedClasses = {}; 
  ```

This line initializes an empty object which creates a list that stores a certain class name for a certain period

## A List being Processed

```python
periodButtons.forEach((button) => {
  button.addEventListener("click", function () {
    let period = button.dataset.period;
  });
});
```
This segment of code iterates throughout each period button and adds an event listener to determine which period the user has selected for a certain class

## A Function

```python
function getClasses() {
  fetch(`${pythonURI}/api/class/add`, fetchOptions)
    .then((res) => res.json())
    .then((classes) => {
      let selectedClasses = {};
      document.querySelectorAll(".dropdown").forEach((button) => {
        button.addEventListener("click", function () {
          let period = button.dataset.period;
          let classListContainer = document.getElementById("class-list");
          classListContainer.innerHTML = `<h2 style="color:white; text-align:center;">Classes for Period ${period}</h2><div class="dropdown-menu show"></div>`;
          let dropdownMenu = classListContainer.querySelector(".dropdown-menu");

          classes.forEach((classObj) => {
            let card = document.createElement("div");
            card.classList.add("class-card");
            card.dataset.class = classObj.pick;
            card.textContent = `${classObj.pick} (Added by ${classObj.user})`;
            if (selectedClasses[period] === classObj.pick) card.classList.add("selected");

            card.addEventListener("click", function () {
              dropdownMenu.querySelectorAll(".class-card").forEach((c) => c.classList.remove("selected"));
              card.classList.add("selected");
              selectedClasses[period] = classObj.pick;
              updateBackend(period, classObj.pick);
            });

            dropdownMenu.appendChild(card);
          });
        });
      });
    });
}
```
**ITERATION**

- periodButtons.forEach((button) => { ... }) loops through each period button to assign a click event

- classes.forEach((classObj) => { ... }) loops through the available classes and creates a class card for each

**SELECTION**

- Filters that class that was selected and shows a highlight on it

**SEQUENCING**

1. A new class card <div> is created
2. Uses an if statement to check if that class is already selected
3. When a user selects a class, it will use the for loop to deselect all the other classes and filters the selected class and highlights it
4. Finally updates backend

## A Call to that function

```python
  getClasses();
```

Calls to getClasses() function and populates dropdowns with Class data from API.